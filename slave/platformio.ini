; ============================================================================
; PlatformIO Configuration - Slave Arduino (LED Controller)
; ============================================================================
; Dedicated LED strip controller with minimal dependencies
; ============================================================================

[platformio]
default_envs = nano_atmega328

[env:nano_atmega328]
platform = atmelavr
board = nanoatmega328
framework = arduino

; Serial monitor
monitor_speed = 9600
monitor_filters = default, time

; Build flags
build_flags = 
    -DLED_SLAVE
    -DMCP2515_CRYSTAL_8MHZ
    -Wall
    -Wextra
    -Os
    -flto
    -ffunction-sections
    -fdata-sections
    -Wl,--gc-sections
    -Wl,--relax

; LED library + CAN for two-Arduino test
lib_deps = 
    adafruit/Adafruit NeoPixel@^1.12.0
    coryjfowler/MCP_CAN@^1.5.1

; Upload settings
upload_protocol = arduino
upload_speed = 115200

; ============================================================================
; Old Bootloader (for clone Nanos)
; ============================================================================
[env:nano_old_bootloader]
platform = atmelavr
board = nanoatmega328
framework = arduino
board_upload.speed = 57600

monitor_speed = 9600
monitor_filters = default, time

build_flags = 
    -DLED_SLAVE
    -DMCP2515_CRYSTAL_8MHZ
    -Wall
    -Wextra
    -Os
    -flto
    -ffunction-sections
    -fdata-sections
    -Wl,--gc-sections
    -Wl,--relax

lib_deps = 
    adafruit/Adafruit NeoPixel@^1.12.0
    coryjfowler/MCP_CAN@^1.5.1

upload_protocol = arduino
upload_speed = 57600
