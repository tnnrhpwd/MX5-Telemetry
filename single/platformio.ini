; PlatformIO Project Configuration File
;
; MX5-Telemetry Single Arduino Setup
; ===================================
; Optimized single Arduino configuration for CAN bus reading and LED control
; Eliminates inter-Arduino communication delay for fastest RPM-to-LED response
;
; Upload: pio run -d single -t upload --upload-port COM6

[env:nano]
platform = atmelavr
board = nanoatmega328
framework = arduino

; Build optimizations for maximum speed and minimum flash usage
build_flags = 
    -Os                          ; Optimize for size
    -DLED_COUNT=20               ; Number of LEDs in strip
    -DCAN_INTERRUPT_PIN=2        ; MCP2515 INT pin (use hardware interrupt)
    -DF_CPU=16000000L            ; Ensure 16MHz operation

; Fast upload settings
upload_speed = 115200

; Required libraries
lib_deps = 
    ; MCP2515 CAN Bus Controller - lean and fast
    coryjfowler/mcp_can@^1.5.0
    ; WS2812B LED Control - optimized NeoPixel library
    adafruit/Adafruit NeoPixel@^1.12.0

; Monitor settings for debugging
monitor_speed = 115200
monitor_filters = 
    direct
    time

; Extra scripts to show build size
extra_scripts = 
